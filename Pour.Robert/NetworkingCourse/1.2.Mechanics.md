### 1.2 The Mechanics of the Model: Encapsulation

The OSI model is not static; it is an assembly line. For data to travel from computer A to computer B, it must undergo a transformation called **encapsulation**.

Imagine sending a fragile letter via mail: you put it in an envelope, then in a box, then in a truck. On the network, it's the same: each layer adds its own "envelope" (header) around the data received from the layer above.



#### Case Study 1: An Email's Journey

Let's take the example of a user, Alice, sending an email to Bob. Here is what happens technically, layer by layer, during sending (Descending from layer 7 to 1):

1.  **Upper Layers (Application - L7): The Data**
    * **Action:** Alice clicks "Send" in her email client (Outlook, Thunderbird).
    * **Data:** The content of the email ("Hi Bob!") is formatted by the **SMTP** protocol.
    * **Analogy:** Alice writes her letter.

2.  **Transport Layer (L4): The Segment**
    * **Action:** The operating system receives the data and chooses reliability (TCP). It slices the data if it is too large.
    * **Encapsulation:** A TCP header is added containing **Ports** (Source Port: random, Destination Port: 25 for SMTP).
    * **Analogy:** We put the letter in a registered envelope to ensure it arrives (TCP). We write "For the Mail Department" (Port).

3.  **Network Layer (L3): The Packet**
    * **Action:** We must determine who the final recipient is on the global network.
    * **Encapsulation:** An IP header is added containing **IP Addresses** (Source IP: Alice's IP, Destination IP: Mail Server's IP).
    * **Analogy:** We write the full postal address on the envelope (Country, City, Street).

4.  **Data Link Layer (L2): The Frame**
    * **Action:** The packet must be delivered to the next *physical* device directly connected (e.g., the modem/router), not directly to the final server halfway across the world.
    * **Encapsulation:** An Ethernet header is added containing **MAC Addresses** (Source MAC: Alice's PC, Destination MAC: Local Router). A footer (FCS) is also added to check for integrity.
    * **Analogy:** The mail carrier puts the envelope in their bag to take it to the local sorting center.

5.  **Physical Layer (L1): The Bits**
    * **Action:** The digital frame (sequence of 0s and 1s) is converted into physical signals.
    * **Transmission:** If it's Wi-Fi, these are radio waves. If it's an Ethernet cable, these are electrical impulses.
    * **Analogy:** The mail truck drives on the highway.

#### Case Study 2: Receiving a VoIP Call (SIP)

Now let's analyze what happens when Bob's IP phone starts ringing. Here, the process is **decapsulation** (Going up from layer 1 to 7) and the main constraint is speed.

1.  **Physical Layer (L1): Signal Arrival**
    * **Reception:** The network cable connected to the phone receives a series of electrical impulses.
    * **Action:** The network card converts these signals into bits (0 and 1).

2.  **Data Link Layer (L2): Local Check**
    * **Reading:** The phone reads the **Ethernet** header.
    * **Verification:** "Is the destination MAC address mine?" (Yes).
    * **Action:** It removes the Ethernet envelope and passes the rest to the layer above.

3.  **Network Layer (L3): Final Verification**
    * **Reading:** The phone reads the **IP** header.
    * **Verification:** "Is the destination IP address 192.168.1.50 (my IP)?"
    * **Action:** It removes the IP envelope.

4.  **Transport Layer (L4): Sorting the Mail**
    * **Reading:** The phone reads the **UDP** header (often used for SIP as it is faster than TCP).
    * **Verification:** "What is the destination port?" It reads port **5060**.
    * **Action:** The system knows that port 5060 corresponds to the telephony service (SIP process). It directs the data to this specific application.

5.  **Application Layer (L7): The Intelligence**
    * **Reading:** The telephony software decodes the SIP message. It is an `INVITE` method.
    * **Content:** "Alice (101) wants to talk to Bob (102)".
    * **Visible Reaction:** The phone displays "Call from Alice" on the screen and activates the ringtone.
